# –ê–Ω–∞–ª–∏–∑ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ö–∞—Ä—Ç—ã

**–í–æ–ø—Ä–æ—Å:** –ù–∞—Å–∫–æ–ª—å–∫–æ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –∫–∞—Ä—Ç—É, –æ—Å—Ç–∞–≤–∞—è—Å—å –Ω–∞ —É–∑–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ, –∏ –∫–∞–∫ —ç—Ç–æ –Ω–∞–≥—Ä—É–∑–∏—Ç —Å–∏—Å—Ç–µ–º—É?

---

## üìä –¢–µ–∫—É—â–µ–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ

**–¢–µ–∫—É—â–∞—è –∫–∞—Ä—Ç–∞:**
- **–£–∑–ª–æ–≤:** 97 (1 Center + 96 —É–∑–ª–æ–≤ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤)
- **–†—ë–±–µ—Ä:** 104 (208 —Å —É—á—ë—Ç–æ–º –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç–∏)
- **–£–∑–ª–æ–≤ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ:** 12
  - Capital: 1
  - City: 2
  - BorderCastle: 3
  - Outpost: 6

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–≤—è–∑–µ–π:**
- Hub-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –≤—Å–µ —É–∑–ª—ã —Å–æ–µ–¥–∏–Ω–µ–Ω—ã —Å–æ —Å—Ç–æ–ª–∏—Ü–µ–π
- –í–æ—Ä–æ—Ç–∞ –º–µ–∂–¥—É –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞–º–∏
- –¶–µ–Ω—Ç—Ä —Å–æ–µ–¥–∏–Ω—ë–Ω —Å –≤–æ—Ä–æ—Ç–∞–º–∏ –∫ —Ü–µ–Ω—Ç—Ä—É

---

## üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã –†–∞—Å—à–∏—Ä–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: **–£–º–µ—Ä–µ–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** (2x)

**–£–∑–ª–æ–≤ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ:** 24 (–≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ)
- Capital: 1
- City: 4 (+2)
- BorderCastle: 6 (+3)
- Outpost: 12 (+6)
- **–ù–æ–≤—ã–µ —Ç–∏–ø—ã:** Village: 1

**–ò—Ç–æ–≥–æ:**
- **–£–∑–ª–æ–≤:** 193 (1 Center + 192)
- **–†—ë–±–µ—Ä:** ~200-250 (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–≤—è–∑–µ–π)

**–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** ~0.1-0.2 —Å–µ–∫
**–ü–∞–º—è—Ç—å:** ~50-100 KB (JSON)

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: **–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** (3-4x)

**–£–∑–ª–æ–≤ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ:** 36-48
- Capital: 1
- City: 6-8
- BorderCastle: 9-12
- Outpost: 18-24
- **–ù–æ–≤—ã–µ —Ç–∏–ø—ã:** Village: 2-3

**–ò—Ç–æ–≥–æ:**
- **–£–∑–ª–æ–≤:** 289-385 (1 Center + 288-384)
- **–†—ë–±–µ—Ä:** ~400-600

**–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** ~0.3-0.5 —Å–µ–∫
**–ü–∞–º—è—Ç—å:** ~150-300 KB (JSON)

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** (5-6x)

**–£–∑–ª–æ–≤ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ:** 60-72
- Capital: 1
- City: 10-12
- BorderCastle: 15-18
- Outpost: 30-36
- **–ù–æ–≤—ã–µ —Ç–∏–ø—ã:** Village: 4-5

**–ò—Ç–æ–≥–æ:**
- **–£–∑–ª–æ–≤:** 481-577 (1 Center + 480-576)
- **–†—ë–±–µ—Ä:** ~800-1200

**–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** ~0.8-1.5 —Å–µ–∫
**–ü–∞–º—è—Ç—å:** ~500-800 KB (JSON)

---

## ‚ö° –ê–Ω–∞–ª–∏–∑ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. **Pathfinding (A* –∞–ª–≥–æ—Ä–∏—Ç–º)**

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** O(n log n) –≥–¥–µ n = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∑–ª–æ–≤

| –£–∑–ª–æ–≤ | –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏ | –û—Ü–µ–Ω–∫–∞ |
|-------|-------------------|--------|
| 97 (—Ç–µ–∫—É—â–µ–µ) | <1 –º—Å | üü¢ –û—Ç–ª–∏—á–Ω–æ |
| 193 (2x) | 1-2 –º—Å | üü¢ –û—Ç–ª–∏—á–Ω–æ |
| 289-385 (3-4x) | 2-5 –º—Å | üü¢ –•–æ—Ä–æ—à–æ |
| 481-577 (5-6x) | 5-10 –º—Å | üü° –ü—Ä–∏–µ–º–ª–µ–º–æ |
| 1000+ | 10-20 –º—Å | üü° –ú–µ–¥–ª–µ–Ω–Ω–æ |

**–í—ã–≤–æ–¥:** Pathfinding –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ –¥–æ ~500 —É–∑–ª–æ–≤.

---

### 2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –í—Å—Ç—Ä–µ—á –Ω–∞ –†—ë–±—Ä–∞—Ö**

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** O(s¬≤) –≥–¥–µ s = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ä—è–¥–æ–≤

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ –æ—Ç—Ä—è–¥—ã –Ω–∞ –æ–¥–Ω–æ–º —Ä–µ–±—Ä–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ (spatial hashing)
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–æ–∫

| –û—Ç—Ä—è–¥–æ–≤ | –í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (–Ω–∞–∏–≤–Ω–æ) | –í—Ä–µ–º—è (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ) |
|---------|-------------------------|------------------------|
| 10 | <1 –º—Å | <0.1 –º—Å |
| 50 | 5-10 –º—Å | <1 –º—Å |
| 100 | 20-50 –º—Å | 2-5 –º—Å |
| 200 | 80-200 –º—Å | 5-10 –º—Å |

**–í—ã–≤–æ–¥:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ä—è–¥–æ–≤ –≤–∞–∂–Ω–µ–µ, —á–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∑–ª–æ–≤.

---

### 3. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** O(n + e) –≥–¥–µ n = —É–∑–ª—ã, e = —Ä—ë–±—Ä–∞

| –£–∑–ª–æ–≤ | –†—ë–±–µ—Ä | –í—Ä–µ–º—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ | –û—Ü–µ–Ω–∫–∞ |
|-------|-------|-----------------|--------|
| 97 | 104 | 10-20 –º—Å | üü¢ –û—Ç–ª–∏—á–Ω–æ |
| 193 | 200-250 | 20-40 –º—Å | üü¢ –•–æ—Ä–æ—à–æ |
| 289-385 | 400-600 | 40-80 –º—Å | üü° –ü—Ä–∏–µ–º–ª–µ–º–æ |
| 481-577 | 800-1200 | 80-150 –º—Å | üü° –ú–µ–¥–ª–µ–Ω–Ω–æ |

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- LOD (Level of Detail) - –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –º–∞—Å—à—Ç–∞–±—É
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã—Ö —É–∑–ª–æ–≤

**–í—ã–≤–æ–¥:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å —É–∑–∫–∏–º –º–µ—Å—Ç–æ–º –ø—Ä–∏ >500 —É–∑–ª–æ–≤.

---

### 4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –û—Ç—Ä—è–¥–æ–≤**

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** O(s) –≥–¥–µ s = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ä—è–¥–æ–≤

| –û—Ç—Ä—è–¥–æ–≤ | –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | –û—Ü–µ–Ω–∫–∞ |
|---------|------------------|--------|
| 10 | <1 –º—Å | üü¢ –û—Ç–ª–∏—á–Ω–æ |
| 50 | 1-2 –º—Å | üü¢ –•–æ—Ä–æ—à–æ |
| 100 | 2-5 –º—Å | üü° –ü—Ä–∏–µ–º–ª–µ–º–æ |
| 200 | 5-10 –º—Å | üü° –ú–µ–¥–ª–µ–Ω–Ω–æ |

**–í—ã–≤–æ–¥:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ä—è–¥–æ–≤ –≤–∞–∂–Ω–µ–µ, —á–µ–º —Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç—ã.

---

### 5. **–ü–∞–º—è—Ç—å**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –£–∑–µ–ª: ~200-300 –±–∞–π—Ç (id, name, pos, type, kingdom, role)
- –†–µ–±—Ä–æ: ~50 –±–∞–π—Ç (2 ID)
- –û—Ç—Ä—è–¥: ~500-1000 –±–∞–π—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞)

| –£–∑–ª–æ–≤ | –†—ë–±–µ—Ä | –ü–∞–º—è—Ç—å (—É–∑–ª—ã+—Ä—ë–±—Ä–∞) | –û—Ü–µ–Ω–∫–∞ |
|-------|-------|---------------------|--------|
| 97 | 104 | ~30 KB | üü¢ –û—Ç–ª–∏—á–Ω–æ |
| 193 | 200-250 | ~60 KB | üü¢ –û—Ç–ª–∏—á–Ω–æ |
| 289-385 | 400-600 | ~100-150 KB | üü¢ –•–æ—Ä–æ—à–æ |
| 481-577 | 800-1200 | ~200-300 KB | üü¢ –•–æ—Ä–æ—à–æ |
| 1000+ | 2000+ | ~500 KB+ | üü° –ü—Ä–∏–µ–º–ª–µ–º–æ |

**–í—ã–≤–æ–¥:** –ü–∞–º—è—Ç—å –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ –¥–∞–∂–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–∞—Ä—Ç.

---

## üéÆ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é

### –î–ª—è MVP (–¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** **–í–∞—Ä–∏–∞–Ω—Ç 1 (2x) - –£–º–µ—Ä–µ–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ**

**–ü–æ—á–µ–º—É:**
- ‚úÖ –£–¥–≤–∞–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
- ‚úÖ –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ <0.2 —Å–µ–∫
- ‚úÖ Pathfinding <2 –º—Å
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è <40 –º—Å
- ‚úÖ –ü–∞–º—è—Ç—å <100 KB

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- Village (–¥–µ—Ä–µ–≤–Ω–∏) - 1-2 –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ
- –ë–æ–ª—å—à–µ Outpost —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏
- –í–æ–∑–º–æ–∂–Ω–æ, –±–æ–ª—å—à–µ Cities

**–ò—Ç–æ–≥–æ:** ~24 —É–∑–ª–∞ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ = **193 —É–∑–ª–∞ –≤—Å–µ–≥–æ**

---

### –î–ª—è –§–∏–Ω–∞–ª—å–Ω–æ–π –í–µ—Ä—Å–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** **–í–∞—Ä–∏–∞–Ω—Ç 2-3 (3-4x) - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ**

**–ü–æ—á–µ–º—É:**
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –¥–æ–ª–≥–æ–π –∏–≥—Ä—ã
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—Å—ë –µ—â—ë —Ö–æ—Ä–æ—à–∞—è
- ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- Village (–¥–µ—Ä–µ–≤–Ω–∏) - 2-3 –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ
- Fortress (–∫—Ä–µ–ø–æ—Å—Ç–∏) - 1-2 –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ
- Ruin (—Ä—É–∏–Ω—ã) - 1-2 –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ
- More Outpost —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏

**–ò—Ç–æ–≥–æ:** ~36-48 —É–∑–ª–æ–≤ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ = **289-385 —É–∑–ª–æ–≤ –≤—Å–µ–≥–æ**

---

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ë–æ–ª—å—à–∏—Ö –ö–∞—Ä—Ç

### 1. **–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –†–∞–∑–±–∏–µ–Ω–∏–µ (Spatial Hashing)**

**–ò–¥–µ—è:** –†–∞–∑–±–∏—Ç—å –∫–∞—Ä—Ç—É –Ω–∞ —Å–µ—Ç–∫—É, –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤—Å—Ç—Ä–µ—á–∏ —Ç–æ–ª—å–∫–æ –≤ —Å–æ—Å–µ–¥–Ω–∏—Ö —è—á–µ–π–∫–∞—Ö.

**–í—ã–∏–≥—Ä—ã—à:** O(s¬≤) ‚Üí O(s) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å—Ç—Ä–µ—á

```python
class SpatialGrid:
    """–°–µ—Ç–∫–∞ –¥–ª—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑–±–∏–µ–Ω–∏—è"""
    def __init__(self, cell_size: float = 50.0):
        self.cell_size = cell_size
        self.grid: Dict[Tuple[int, int], List[Squad]] = {}
    
    def add_squad(self, squad: Squad):
        """–î–æ–±–∞–≤–ª—è–µ—Ç –æ—Ç—Ä—è–¥ –≤ —Å–µ—Ç–∫—É"""
        cell = self._get_cell(squad.position)
        if cell not in self.grid:
            self.grid[cell] = []
        self.grid[cell].append(squad)
    
    def get_nearby_squads(self, position: Tuple[float, float]) -> List[Squad]:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—Ä—è–¥—ã –≤ —Å–æ—Å–µ–¥–Ω–∏—Ö —è—á–µ–π–∫–∞—Ö"""
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ —Å–æ—Å–µ–¥–Ω–∏–µ —è—á–µ–π–∫–∏
        ...
```

---

### 2. **LOD –¥–ª—è –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏**

**–ò–¥–µ—è:** –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∏–¥–∏–º—ã—Ö —É–∑–ª–æ–≤.

**–í—ã–∏–≥—Ä—ã—à:** –£–º–µ–Ω—å—à–∞–µ—Ç –≤—Ä–µ–º—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –≤ 2-5 —Ä–∞–∑

```python
def draw_map(self, zoom_level: float):
    """–û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É —Å —É—á—ë—Ç–æ–º —É—Ä–æ–≤–Ω—è –º–∞—Å—à—Ç–∞–±–∞"""
    if zoom_level < 0.5:
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Å—Ç–æ–ª–∏—Ü—ã –∏ –∫—Ä—É–ø–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
        visible_nodes = [n for n in nodes if n.node_type in ["Capital", "City"]]
    elif zoom_level < 1.0:
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–æ–ª–∏—Ü—ã, –≥–æ—Ä–æ–¥–∞, –∑–∞–º–∫–∏
        visible_nodes = [n for n in nodes if n.node_type != "Outpost"]
    else:
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —É–∑–ª—ã
        visible_nodes = nodes
    ...
```

---

### 3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Pathfinding**

**–ò–¥–µ—è:** –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏ –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤.

**–í—ã–∏–≥—Ä—ã—à:** –£–º–µ–Ω—å—à–∞–µ—Ç –≤—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏ –≤ 10-100 —Ä–∞–∑ –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤

```python
class PathCache:
    """–ö—ç—à –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ pathfinding"""
    def __init__(self):
        self.cache: Dict[Tuple[str, str], List[str]] = {}
    
    def get_path(self, start: str, goal: str) -> Optional[List[str]]:
        """–ü–æ–ª—É—á–∞–µ—Ç –ø—É—Ç—å –∏–∑ –∫—ç—à–∞"""
        key = (start, goal)
        return self.cache.get(key)
    
    def cache_path(self, start: str, goal: str, path: List[str]):
        """–ö—ç—à–∏—Ä—É–µ—Ç –ø—É—Ç—å"""
        key = (start, goal)
        self.cache[key] = path
```

---

### 4. **–õ–µ–Ω–∏–≤–∞—è –ó–∞–≥—Ä—É–∑–∫–∞**

**–ò–¥–µ—è:** –ó–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —É–∑–ª–æ–≤ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

**–í—ã–∏–≥—Ä—ã—à:** –£–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

```python
class LazyNodeLoader:
    """–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —É–∑–ª–æ–≤"""
    def __init__(self, node_ids: List[str]):
        self.node_ids = node_ids
        self.loaded_nodes: Dict[str, Node] = {}
    
    def get_node(self, node_id: str) -> Node:
        """–ó–∞–≥—Ä—É–∂–∞–µ—Ç —É–∑–µ–ª –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏"""
        if node_id not in self.loaded_nodes:
            self.loaded_nodes[node_id] = self._load_node(node_id)
        return self.loaded_nodes[node_id]
```

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¢–∞–±–ª–∏—Ü–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–µ–∫—É—â–µ–µ (12) | 2x (24) | 3-4x (36-48) | 5-6x (60-72) |
|----------|--------------|---------|--------------|--------------|
| **–£–∑–ª–æ–≤ –≤—Å–µ–≥–æ** | 97 | 193 | 289-385 | 481-577 |
| **–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** | <0.1 —Å–µ–∫ | 0.1-0.2 —Å–µ–∫ | 0.3-0.5 —Å–µ–∫ | 0.8-1.5 —Å–µ–∫ |
| **Pathfinding** | <1 –º—Å | 1-2 –º—Å | 2-5 –º—Å | 5-10 –º—Å |
| **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** | 10-20 –º—Å | 20-40 –º—Å | 40-80 –º—Å | 80-150 –º—Å |
| **–ü–∞–º—è—Ç—å** | ~30 KB | ~60 KB | ~100-150 KB | ~200-300 KB |
| **–û—Ü–µ–Ω–∫–∞** | üü¢ –û—Ç–ª–∏—á–Ω–æ | üü¢ –û—Ç–ª–∏—á–Ω–æ | üü¢ –•–æ—Ä–æ—à–æ | üü° –ü—Ä–∏–µ–º–ª–µ–º–æ |

---

## ‚úÖ –í—ã–≤–æ–¥—ã –∏ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è MVP (–°–µ–π—á–∞—Å)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** **–£–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 24 —É–∑–ª–æ–≤ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ (2x)**

**–ü–æ—á–µ–º—É:**
- ‚úÖ –£–¥–≤–∞–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –±–µ–∑ –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–ª–∏—á–Ω–æ–π
- ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è (Village, –±–æ–ª—å—à–µ Outpost)
- ‚úÖ –í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: 1-2 —á–∞—Å–∞ (–∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥)

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- Village: 1-2 –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ
- –ë–æ–ª—å—à–µ Outpost —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏ (Farm, Mine, Lumber, TradePost, Ruin, Fortress)
- –í–æ–∑–º–æ–∂–Ω–æ, –±–æ–ª—å—à–µ Cities (3-4 –≤–º–µ—Å—Ç–æ 2)

**–ò—Ç–æ–≥–æ:** ~24 —É–∑–ª–∞ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ = **193 —É–∑–ª–∞ –≤—Å–µ–≥–æ**

---

### –î–ª—è –§–∏–Ω–∞–ª—å–Ω–æ–π –í–µ—Ä—Å–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** **36-48 —É–∑–ª–æ–≤ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ (3-4x)**

**–ü–æ—á–µ–º—É:**
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –¥–æ–ª–≥–æ–π –∏–≥—Ä—ã
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—Å—ë –µ—â—ë —Ö–æ—Ä–æ—à–∞—è
- ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- Village: 2-3 –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ
- Fortress: 1-2 –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ
- Ruin: 1-2 –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ
- –ë–æ–ª—å—à–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è –≤ Outpost

**–ò—Ç–æ–≥–æ:** ~36-48 —É–∑–ª–æ–≤ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ = **289-385 —É–∑–ª–æ–≤ –≤—Å–µ–≥–æ**

---

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ï—Å–ª–∏ –Ω—É–∂–Ω–æ)

**–ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ >500 —É–∑–ª–æ–≤:**
1. –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –¥–ª—è –≤—Å—Ç—Ä–µ—á
2. LOD –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ pathfinding
4. –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —É–∑–ª–æ–≤

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–æ 300-400 —É–∑–ª–æ–≤ –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π. –î–ª—è –±–æ–ª—å—à–∏—Ö –∫–∞—Ä—Ç –Ω—É–∂–Ω—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –Ω–æ –æ–Ω–∏ –ø—Ä–æ—Å—Ç—ã–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## üöÄ –ü–ª–∞–Ω –î–µ–π—Å—Ç–≤–∏–π

### –®–∞–≥ 1: –†–∞—Å—à–∏—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (1-2 —á–∞—Å–∞)

–û–±–Ω–æ–≤–∏—Ç—å `data/map_config.json`:
- –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∑–ª–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã (Village)
- –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ä–æ–ª–µ–π –¥–ª—è Outpost

### –®–∞–≥ 2: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (30 –º–∏–Ω)

- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å pathfinding
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é

### –®–∞–≥ 3: –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (1-2 –¥–Ω—è)

- –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ
- LOD –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ pathfinding

---

## üí° –ò—Ç–æ–≥–æ–≤–∞—è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–î–ª—è MVP:** **24 —É–∑–ª–∞ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ (193 —É–∑–ª–∞ –≤—Å–µ–≥–æ)**

**–ü–æ—á–µ–º—É:**
- ‚úÖ –£–¥–≤–∞–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–ª–∏—á–Ω–∞—è
- ‚úÖ –ë—ã—Å—Ç—Ä–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è (1-2 —á–∞—Å–∞)
- ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è

**–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º—É:** üü¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –û–±–Ω–æ–≤–∏—Ç—å `data/map_config.json` –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å!
