# –ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã: –ì–∏–±–∫–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–∞—Ä—Ç—ã

## –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

### ‚úÖ –ß—Ç–æ —É–∂–µ –≥–∏–±–∫–æ

1. **–ö–ª–∞—Å—Å `Node`** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ –¥–ª—è `node_type` –∏ `role`
   - ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã/—Ä–æ–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
   - ‚úÖ –ù–µ—Ç –∂—ë—Å—Ç–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ç–∏–ø–∞–º

2. **–ö–ª–∞—Å—Å `World`** ‚Äî –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤
   - ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ —É–∑–ª–∞–º–∏ —á–µ—Ä–µ–∑ ID
   - ‚úÖ –ü–æ–∏—Å–∫ –ø—É—Ç–∏ (A*) –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —É–∑–ª–æ–≤ ‚Äî –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–æ–≤

3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö** ‚Äî JSON —Ñ–∞–π–ª—ã
   - ‚úÖ –õ–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

1. **`test.py`** ‚Äî —Ö–∞—Ä–¥–∫–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —É–∑–ª–æ–≤
   - ‚ùå `OUTPOST_ROLES = ["Farm", "Farm", "Mine", ...]` ‚Äî –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ
   - ‚ùå –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∑–ª–æ–≤ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ –≤ —Ü–∏–∫–ª–∞—Ö
   - ‚ùå –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (GATE_TO_CENTER_DIST, etc.) ‚Äî –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã** ‚Äî –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥
   - ‚ùå –õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –≤ `test.py`
   - ‚ùå –ù–µ—Ç –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø —É–∑–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Port")

**–¢–µ–∫—É—â–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω—è—è (2-3 —á–∞—Å–∞)
- –ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å `test.py` (–¥–æ–±–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é)
- –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `data/map_structure.json`
- –í–æ–∑–º–æ–∂–Ω–æ, –æ–±–Ω–æ–≤–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é

**–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:** üü¢ –ù–∏–∑–∫–∞—è (15-30 –º–∏–Ω—É—Ç)
- –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥ JSON
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —É–∑–ª—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∑–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 12 ‚Üí 20)

**–¢–µ–∫—É—â–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω—è—è (1-2 —á–∞—Å–∞)
- –ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ü–∏–∫–ª—ã –≤ `test.py`
- –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –í–æ–∑–º–æ–∂–Ω–æ, –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–≤—è–∑–µ–π

**–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:** üü¢ –ù–∏–∑–∫–∞—è (5-10 –º–∏–Ω—É—Ç)
- –ò–∑–º–µ–Ω–∏—Ç—å —á–∏—Å–ª–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Å—Ç –∫–∞—Ä—Ç—É

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ä–æ–ª—å –¥–ª—è Outpost

**–¢–µ–∫—É—â–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å:** üü¢ –ù–∏–∑–∫–∞—è (10 –º–∏–Ω—É—Ç)
- –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `OUTPOST_ROLES`
- –£–∂–µ –≥–∏–±–∫–æ!

**–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:** üü¢ –ù–∏–∑–∫–∞—è (5 –º–∏–Ω—É—Ç)
- –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–≤—è–∑–µ–π (–Ω–µ hub, –∞ —Å–µ—Ç—å)

**–¢–µ–∫—É—â–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å:** üî¥ –í—ã—Å–æ–∫–∞—è (4-6 —á–∞—Å–æ–≤)
- –ù—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ª–æ–≥–∏–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä—ë–±–µ—Ä –≤ `test.py`
- –í–æ–∑–º–æ–∂–Ω–æ, –∏–∑–º–µ–Ω–∏—Ç—å `World.add_edge()` –ª–æ–≥–∏–∫—É

**–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:** üü° –°—Ä–µ–¥–Ω—è—è (1-2 —á–∞—Å–∞)
- –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–≤—è–∑–µ–π
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏–º–µ–Ω–∏—Ç –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —É–∑–ª–æ–≤ (JSON)

–°–æ–∑–¥–∞—Ç—å `data/map_config.json`:

```json
{
  "node_structure": {
    "per_kingdom": {
      "Capital": {"count": 1, "roles": ["Capital"]},
      "City": {"count": 2, "roles": ["City"]},
      "BorderCastle": {"count": 3, "roles": ["GateToCenter", "GateToCW", "GateToCCW"]},
      "Outpost": {"count": 6, "roles": ["Farm", "Farm", "Mine", "Lumber", "TradePost", "Ruin"]}
    }
  },
  "generation_params": {
    "gate_to_center_dist": 120.0,
    "gate_to_neighbor_t": 0.35,
    "city_offset": 95.0,
    "outpost_radius": 170.0
  }
}
```

### 2. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–∞—Ä—Ç—ã (–æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å)

–°–æ–∑–¥–∞—Ç—å `src/utils/map_generator.py`:
- –ß–∏—Ç–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –∏–∑ JSON
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–∑–ª—ã –∏ —Ä—ë–±—Ä–∞
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è `World`

### 3. Enum –¥–ª—è —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å Enum, –Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —á–µ—Ä–µ–∑ —Å—Ç—Ä–æ–∫–∏:

```python
class NodeType(Enum):
    CAPITAL = "Capital"
    CITY = "City"
    BORDER_CASTLE = "BorderCastle"
    OUTPOST = "Outpost"
    CENTER = "Center"
    
    @classmethod
    def from_string(cls, value: str):
        # –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ —Å—Ç—Ä–æ–∫–∏, –∏ Enum
        try:
            return cls(value)
        except ValueError:
            # –ù–æ–≤—ã–π —Ç–∏–ø - —Å–æ–∑–¥–∞—ë–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç—Ä–æ–∫—É
            return value
```

## –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

**–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** üü° –°—Ä–µ–¥–Ω—è—è –≥–∏–±–∫–æ—Å—Ç—å
- –ë–∞–∑–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (—Ç–∏–ø—ã, —Ä–æ–ª–∏) ‚Äî –ª–µ–≥–∫–æ
- –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Å–≤—è–∑–∏) ‚Äî —Å–ª–æ–∂–Ω–µ–µ

**–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:** üü¢ –í—ã—Å–æ–∫–∞—è –≥–∏–±–∫–æ—Å—Ç—å
- –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Äî —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞

## –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `data/map_config.json` —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `src/utils/map_generator.py` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
3. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤ `World`
4. ‚è∏Ô∏è –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: Enum –¥–ª—è —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤

**–í—Ä–µ–º—è –Ω–∞ —É–ª—É—á—à–µ–Ω–∏—è:** ~2-3 —á–∞—Å–∞
**–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤ –±—É–¥—É—â–µ–º:** –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è (—á–∞—Å—ã ‚Üí –º–∏–Ω—É—Ç—ã)
