# –î–≤–∏–∂–µ–Ω–∏–µ –∏ –í—Å—Ç—Ä–µ—á–∏ –û—Ç—Ä—è–¥–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –æ—Ç—Ä—è–¥—ã –ø—Ä–æ—Å—Ç–æ "—Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è" –∏–∑ —É–∑–ª–∞ –≤ —É–∑–µ–ª, –≤—Å—Ç—Ä–µ—á–∏ –≤–æ–∑–º–æ–∂–Ω—ã —Ç–æ–ª—å–∫–æ –≤ —É–∑–ª–∞—Ö, –∞ –Ω–µ –Ω–∞ –ø—É—Ç–∏ –º–µ–∂–¥—É –Ω–∏–º–∏.

**–†–µ—à–µ–Ω–∏–µ:** –î–≤–∏–∂–µ–Ω–∏–µ –ø–æ —Ä—ë–±—Ä–∞–º —Å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏.

---

## üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã –†–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: **–î–≤–∏–∂–µ–Ω–∏–µ –ø–æ —Ä—ë–±—Ä–∞–º** (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø) ‚≠ê

**–ò–¥–µ—è:** –û—Ç—Ä—è–¥—ã –¥–≤–∏–∂—É—Ç—Å—è –ø–æ —Ä—ë–±—Ä–∞–º –º–µ–∂–¥—É —É–∑–ª–∞–º–∏, –∏–º–µ—é—Ç –ø–æ–∑–∏—Ü–∏—é –Ω–∞ —Ä–µ–±—Ä–µ (0.0-1.0).

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –û—Ç—Ä—è–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ä–µ–±—Ä–µ `(node_from, node_to)`
- `edge_progress: float` (0.0-1.0) - –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Ä–µ–±—Ä—É
- –í—Å—Ç—Ä–µ—á–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è: –µ—Å–ª–∏ –¥–≤–∞ –æ—Ç—Ä—è–¥–∞ –Ω–∞ –æ–¥–Ω–æ–º —Ä–µ–±—Ä–µ –∏ –±–ª–∏–∑–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏

**–ü–ª—é—Å—ã:**
- ‚úÖ –í—Å—Ç—Ä–µ—á–∏ –≤–æ–∑–º–æ–∂–Ω—ã –Ω–∞ –ø—É—Ç–∏ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (—Ä—ë–±—Ä–∞ —É–∂–µ –µ—Å—Ç—å!)
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å—Ç—Ä–µ—á
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ (–æ—Ç—Ä—è–¥ "–ø–æ–ª–∑—ë—Ç" –ø–æ —Ä–µ–±—Ä—É)

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –í—Å—Ç—Ä–µ—á–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ–º —Ä–µ–±—Ä–µ (–Ω–µ –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è—Ö)
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å—Ç—Ä–µ—á–∏ –Ω–∞ —Ä—ë–±—Ä–∞—Ö

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 2-3 –¥–Ω—è

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —É–∑–ª—ã –Ω–∞ —Ä—ë–±—Ä–∞—Ö**

**–ò–¥–µ—è:** –†–∞–∑–±–∏—Ç—å –∫–∞–∂–¥–æ–µ —Ä–µ–±—Ä–æ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö "–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤".

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –†–µ–±—Ä–æ `(A, B)` —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —É–∑–ª—ã: `A ‚Üí A1 ‚Üí A2 ‚Üí A3 ‚Üí B`
- –û—Ç—Ä—è–¥—ã –¥–≤–∏–∂—É—Ç—Å—è –ø–æ —ç—Ç–∏–º —É–∑–ª–∞–º
- –í—Å—Ç—Ä–µ—á–∏ –∫–∞–∫ –æ–±—ã—á–Ω–æ (–≤ —É–∑–ª–∞—Ö)

**–ü–ª—é—Å—ã:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É —É–∑–ª–æ–≤
- ‚úÖ –í—Å—Ç—Ä–µ—á–∏ –≤ —É–∑–ª–∞—Ö (–ø—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞)

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∑–ª–æ–≤ (96 —Ä—ë–±–µ—Ä ‚Üí ~300-400 —É–∑–ª–æ–≤)
- ‚ùå –°–ª–æ–∂–Ω–µ–µ pathfinding
- ‚ùå –ú–µ–Ω–µ–µ –≥–∏–±–∫–æ

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 3-4 –¥–Ω—è

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: **–°–≤–æ–±–æ–¥–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏**

**–ò–¥–µ—è:** –£–∑–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞, –Ω–æ –¥–≤–∏–∂–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –û—Ç—Ä—è–¥ –∏–º–µ–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã `(x, y)`
- –î–≤–∏–∂–µ—Ç—Å—è –∫ —Ü–µ–ª–µ–≤–æ–º—É —É–∑–ª—É –ø–æ –ø—Ä—è–º–æ–π (–∏–ª–∏ —Å –æ–±—Ö–æ–¥–æ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π)
- –í—Å—Ç—Ä–µ—á–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é –º–µ–∂–¥—É –æ—Ç—Ä—è–¥–∞–º–∏

**–ü–ª—é—Å—ã:**
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å
- ‚úÖ –í—Å—Ç—Ä–µ—á–∏ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ
- ‚úÖ –ë–ª–∏–∂–µ –∫ Battle Brothers

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ù—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (6-10 —á–∞—Å–æ–≤)
- ‚ùå –ù—É–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
- ‚ùå –°–ª–æ–∂–Ω–µ–µ pathfinding

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 1-2 –Ω–µ–¥–µ–ª–∏

---

### –í–∞—Ä–∏–∞–Ω—Ç 4: **–ó–æ–Ω—ã –º–µ–∂–¥—É —É–∑–ª–∞–º–∏**

**–ò–¥–µ—è:** –†—ë–±—Ä–∞ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ "–∑–æ–Ω—ã", –≤—Å—Ç—Ä–µ—á–∏ –≤ –∑–æ–Ω–∞—Ö.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –†–µ–±—Ä–æ `(A, B)` –∏–º–µ–µ—Ç –∑–æ–Ω—ã: `[A, zone1, zone2, zone3, B]`
- –û—Ç—Ä—è–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∑–æ–Ω–µ
- –í—Å—Ç—Ä–µ—á–∏: –µ—Å–ª–∏ –¥–≤–∞ –æ—Ç—Ä—è–¥–∞ –≤ –æ–¥–Ω–æ–π –∑–æ–Ω–µ

**–ü–ª—é—Å—ã:**
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –≤—Å—Ç—Ä–µ—á
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –í—Å—Ç—Ä–µ—á–∏ —Ç–æ–ª—å–∫–æ –≤ –∑–æ–Ω–∞—Ö (–Ω–µ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö)
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ä–∞–∑–º–µ—Ä –∑–æ–Ω

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 2-3 –¥–Ω—è

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –í–∞—Ä–∏–∞–Ω—Ç 1 (–î–≤–∏–∂–µ–Ω–∏–µ –ø–æ —Ä—ë–±—Ä–∞–º)

**–ü–æ—á–µ–º—É:**
- ‚úÖ –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –≤—Å—Ç—Ä–µ—á
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–¥–µ–ª–∫–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –ë—ã—Å—Ç—Ä–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ

---

## üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–í–∞—Ä–∏–∞–Ω—Ç 1)

### 1. –û–±–Ω–æ–≤–∏—Ç—å Squad –∫–ª–∞—Å—Å

```python
@dataclass
class Squad:
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
    
    # –î–≤–∏–∂–µ–Ω–∏–µ –ø–æ —Ä—ë–±—Ä–∞–º
    current_edge: Optional[Tuple[str, str]] = None  # (node_from, node_to)
    edge_progress: float = 0.0  # 0.0 = –Ω–∞—á–∞–ª–æ —Ä–µ–±—Ä–∞, 1.0 = –∫–æ–Ω–µ—Ü —Ä–µ–±—Ä–∞
    movement_speed: float = 1.0  # –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ —Ä–µ–±—Ä—É (–µ–¥–∏–Ω–∏—Ü –≤ —Å–µ–∫—É–Ω–¥—É)
    
    # –î–ª—è –≤—Å—Ç—Ä–µ—á
    is_moving: bool = False
```

### 2. –õ–æ–≥–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è

```python
def _update_squad(self, squad: Squad, delta_time: float):
    """–û–±–Ω–æ–≤–ª—è–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –æ—Ç—Ä—è–¥–∞"""
    
    # –ï—Å–ª–∏ –æ—Ç—Ä—è–¥ –≤ —É–∑–ª–µ –∏ –µ—Å—Ç—å –ø—É—Ç—å
    if squad.current_edge is None and squad.path:
        # –ù–∞—á–∏–Ω–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ –ø–µ—Ä–≤–æ–º—É —Ä–µ–±—Ä—É –ø—É—Ç–∏
        next_node = squad.path[0]
        squad.current_edge = (squad.current_node_id, next_node)
        squad.edge_progress = 0.0
        squad.is_moving = True
    
    # –ï—Å–ª–∏ –æ—Ç—Ä—è–¥ –¥–≤–∏–∂–µ—Ç—Å—è –ø–æ —Ä–µ–±—Ä—É
    if squad.current_edge:
        # –í—ã—á–∏—Å–ª—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è
        edge_length = self._get_edge_length(squad.current_edge)
        speed = squad.average_speed  # –ò–∑ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
        
        # –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
        squad.edge_progress += (speed * delta_time) / edge_length
        
        # –ï—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–ª–∏ –∫–æ–Ω—Ü–∞ —Ä–µ–±—Ä–∞
        if squad.edge_progress >= 1.0:
            # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —É–∑–µ–ª
            squad.current_node_id = squad.current_edge[1]
            squad.current_edge = None
            squad.edge_progress = 0.0
            squad.is_moving = False
            
            # –£–±–∏—Ä–∞–µ–º –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–π —É–∑–µ–ª –∏–∑ –ø—É—Ç–∏
            if squad.path and squad.path[0] == squad.current_node_id:
                squad.path.pop(0)
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å—Ç—Ä–µ—á–∏ –≤ —É–∑–ª–µ
            self._check_encounters_in_node(squad.current_node_id)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å—Ç—Ä–µ—á–∏ –Ω–∞ —Ä—ë–±—Ä–∞—Ö
    if squad.is_moving:
        self._check_encounters_on_edge(squad.current_edge, squad.edge_progress)
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å—Ç—Ä–µ—á –Ω–∞ —Ä—ë–±—Ä–∞—Ö

```python
def _check_encounters_on_edge(self, edge: Tuple[str, str], progress: float):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å—Ç—Ä–µ—á–∏ –æ—Ç—Ä—è–¥–æ–≤ –Ω–∞ —Ä–µ–±—Ä–µ"""
    
    # –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –æ—Ç—Ä—è–¥—ã –Ω–∞ —ç—Ç–æ–º —Ä–µ–±—Ä–µ
    squads_on_edge = [
        s for s in self.all_squads
        if s.current_edge == edge and s.is_moving
    ]
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–ª–∏–∑–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–π
    for squad1, squad2 in combinations(squads_on_edge, 2):
        distance = abs(squad1.edge_progress - squad2.edge_progress)
        
        # –ï—Å–ª–∏ –æ—Ç—Ä—è–¥—ã –±–ª–∏–∑–∫–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 0.1)
        if distance < 0.1:
            self._trigger_encounter(squad1, squad2, edge, progress)
```

### 4. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

```python
def get_squad_position(self, squad: Squad) -> Tuple[float, float]:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –æ—Ç—Ä—è–¥–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏"""
    
    if squad.current_edge:
        # –ü–æ–∑–∏—Ü–∏—è –Ω–∞ —Ä–µ–±—Ä–µ (–∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è)
        node_from = self.world.get_node(squad.current_edge[0])
        node_to = self.world.get_node(squad.current_edge[1])
        
        x = node_from.pos[0] + (node_to.pos[0] - node_from.pos[0]) * squad.edge_progress
        y = node_from.pos[1] + (node_to.pos[1] - node_from.pos[1]) * squad.edge_progress
        
        return (x, y)
    else:
        # –ü–æ–∑–∏—Ü–∏—è –≤ —É–∑–ª–µ
        node = self.world.get_node(squad.current_node_id)
        return node.pos
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –í–∞—Ä–∏–∞–Ω—Ç–æ–≤

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –í–∞—Ä–∏–∞–Ω—Ç 1 (–†—ë–±—Ä–∞) | –í–∞—Ä–∏–∞–Ω—Ç 2 (–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —É–∑–ª—ã) | –í–∞—Ä–∏–∞–Ω—Ç 3 (–°–≤–æ–±–æ–¥–Ω–æ–µ) | –í–∞—Ä–∏–∞–Ω—Ç 4 (–ó–æ–Ω—ã) |
|----------|-------------------|--------------------------------|----------------------|------------------|
| **–í—Å—Ç—Ä–µ—á–∏ –Ω–∞ –ø—É—Ç–∏** | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** | üü¢ –ù–∏–∑–∫–∞—è | üü° –°—Ä–µ–¥–Ω—è—è | üî¥ –í—ã—Å–æ–∫–∞—è | üü¢ –ù–∏–∑–∫–∞—è |
| **–í—Ä–µ–º—è** | 2-3 –¥–Ω—è | 3-4 –¥–Ω—è | 1-2 –Ω–µ–¥–µ–ª–∏ | 2-3 –¥–Ω—è |
| **–ì–∏–±–∫–æ—Å—Ç—å** | üü° –°—Ä–µ–¥–Ω—è—è | üü¢ –í—ã—Å–æ–∫–∞—è | üü¢ –í—ã—Å–æ–∫–∞—è | üü° –°—Ä–µ–¥–Ω—è—è |
| **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** | üü¢ –ü—Ä–æ—Å—Ç–∞—è | üü¢ –ü—Ä–æ—Å—Ç–∞—è | üü° –°—Ä–µ–¥–Ω—è—è | üü¢ –ü—Ä–æ—Å—Ç–∞—è |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | üü¢ –•–æ—Ä–æ—à–∞—è | üü° –°—Ä–µ–¥–Ω—è—è | üü° –°—Ä–µ–¥–Ω—è—è | üü¢ –•–æ—Ä–æ—à–∞—è |

---

## üéÆ –ü—Ä–∏–º–µ—Ä –ì–µ–π–º–ø–ª–µ—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –í—Å—Ç—Ä–µ—á–∞ –Ω–∞ –ø—É—Ç–∏

1. –ò–≥—Ä–æ–∫ –¥–≤–∏–∂–µ—Ç—Å—è –∏–∑ —É–∑–ª–∞ A –≤ —É–∑–µ–ª B
2. –í—Ä–∞–≥ –¥–≤–∏–∂–µ—Ç—Å—è –∏–∑ —É–∑–ª–∞ B –≤ —É–∑–µ–ª A (–ø–æ —Ç–æ–º—É –∂–µ —Ä–µ–±—Ä—É)
3. –ö–æ–≥–¥–∞ `edge_progress` –æ–±–æ–∏—Ö –æ—Ç—Ä—è–¥–æ–≤ –±–ª–∏–∑–∫–∏ ‚Üí –≤—Å—Ç—Ä–µ—á–∞!
4. –ë–æ–π –∏–ª–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –í—Å—Ç—Ä–µ—á–∞ –≤ —É–∑–ª–µ

1. –ò–≥—Ä–æ–∫ –ø—Ä–∏–±—ã–≤–∞–µ—Ç –≤ —É–∑–µ–ª B
2. –í —É–∑–ª–µ —É–∂–µ –µ—Å—Ç—å –¥—Ä—É–≥–æ–π –æ—Ç—Ä—è–¥
3. –í—Å—Ç—Ä–µ—á–∞ –≤ —É–∑–ª–µ ‚Üí –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –î–æ–≥–æ–Ω—è—é—â–∏–π

1. –ò–≥—Ä–æ–∫ –¥–≤–∏–∂–µ—Ç—Å—è –ø–æ —Ä–µ–±—Ä—É (A ‚Üí B) —Å `progress = 0.3`
2. –í—Ä–∞–≥ –Ω–∞—á–∏–Ω–∞–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ —Ç–æ–º—É –∂–µ —Ä–µ–±—Ä—É —Å `progress = 0.0`
3. –ï—Å–ª–∏ –≤—Ä–∞–≥ –±—ã—Å—Ç—Ä–µ–µ ‚Üí –º–æ–∂–µ—Ç –¥–æ–≥–Ω–∞—Ç—å –Ω–∞ —Ä–µ–±—Ä–µ
4. –í—Å—Ç—Ä–µ—á–∞ –Ω–∞ —Ä–µ–±—Ä–µ ‚Üí –±–æ–π

---

## üöÄ –ü–ª–∞–Ω –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –î–µ–Ω—å 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `Squad` –∫–ª–∞—Å—Å (–¥–æ–±–∞–≤–∏—Ç—å `current_edge`, `edge_progress`)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `get_squad_position()` –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `_update_squad()` –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ —Ä—ë–±—Ä–∞–º

### –î–µ–Ω—å 2: –í—Å—Ç—Ä–µ—á–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_check_encounters_on_edge()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_check_encounters_in_node()`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Å–æ–±—ã—Ç–∏–π –≤—Å—Ç—Ä–µ—á

### –î–µ–Ω—å 3: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –∫–∞—Ä—Ç—ã (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—Ç—Ä—è–¥—ã –Ω–∞ —Ä—ë–±—Ä–∞—Ö)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á

---

## üí≠ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –°–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –í—Å—Ç—Ä–µ—á–∏ –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è—Ö —Ä—ë–±–µ—Ä

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –¥–≤–∞ –æ—Ç—Ä—è–¥–∞ –¥–≤–∏–∂—É—Ç—Å—è –ø–æ —Ä–∞–∑–Ω—ã–º —Ä—ë–±—Ä–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è, –æ–Ω–∏ –Ω–µ –≤—Å—Ç—Ä–µ—Ç—è—Ç—Å—è.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–ª—è MVP: –º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å (–≤—Å—Ç—Ä–µ—á–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ–º —Ä–µ–±—Ä–µ)
- –î–ª—è –±—É–¥—É—â–µ–≥–æ: –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —Ä—ë–±–µ—Ä

### –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è

**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç—Ä—è–¥–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–≤–∏–∂–µ–Ω–∏–µ?

**–û—Ç–≤–µ—Ç:**
- `average_speed` –∏–∑ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ ‚Üí —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ —Ä–µ–±—Ä—É
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (–¥–æ—Ä–æ–≥–∏, —Ç—É–º–∞–Ω, —É—Å—Ç–∞–ª–æ—Å—Ç—å)

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—Ç—Ä—è–¥—ã –Ω–∞ —Ä—ë–±—Ä–∞—Ö?

**–û—Ç–≤–µ—Ç:**
- –¢–æ—á–∫–∞ –Ω–∞ –ª–∏–Ω–∏–∏ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏
- –ü–æ–∑–∏—Ü–∏—è = –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –ø–æ `edge_progress`
- –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è (—Ç–æ—á–∫–∞ "–ø–æ–ª–∑—ë—Ç" –ø–æ –ª–∏–Ω–∏–∏)

---

## ‚úÖ –í—ã–≤–æ–¥

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∞—Ä–∏–∞–Ω—Ç 1 (–î–≤–∏–∂–µ–Ω–∏–µ –ø–æ —Ä—ë–±—Ä–∞–º)

**–ü–æ—á–µ–º—É:**
- ‚úÖ –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –≤—Å—Ç—Ä–µ—á
- ‚úÖ –ë—ã—Å—Ç—Ä–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è (2-3 –¥–Ω—è)
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–¥–µ–ª–∫–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ —Ä—ë–±—Ä–∞–º.
