# –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —Å Pygame

**–í–æ–ø—Ä–æ—Å:** –ü–æ–¥–æ–π–¥—ë—Ç –ª–∏ –Ω–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è pygame?

**–û—Ç–≤–µ—Ç:** –ß–∞—Å—Ç–∏—á–Ω–æ. –ù—É–∂–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–∏–ø–æ–≤ —Ä—ë–±–µ—Ä –∏ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö —Å–≤—è–∑–µ–π.

---

## üìä –¢–µ–∫—É—â–µ–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ

### –ß—Ç–æ –µ—Å—Ç—å —Å–µ–π—á–∞—Å:

1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä—ë–±–µ—Ä:**
   ```python
   edges: List[Tuple[str, str]] = []  # (from, to)
   ```

2. **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä:**
   - –°–æ–∑–¥–∞—ë—Ç —Ä—ë–±—Ä–∞ –±–µ–∑ —Ç–∏–ø–æ–≤
   - Hub-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–≤—Å–µ —É–∑–ª—ã –∫ —Å—Ç–æ–ª–∏—Ü–µ)
   - –ü—Ä–æ—Å—Ç—ã–µ —Å–≤—è–∑–∏

3. **World –∫–ª–∞—Å—Å:**
   - –†–∞–±–æ—Ç–∞–µ—Ç —Å —Ä—ë–±—Ä–∞–º–∏ –±–µ–∑ —Ç–∏–ø–æ–≤
   - `add_edge(from, to)` - –±–µ–∑ —Ç–∏–ø–∞
   - `get_neighbors()` - –±–µ–∑ —É—á—ë—Ç–∞ —Ç–∏–ø–æ–≤

4. **MapStorage:**
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç/–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ä—ë–±—Ä–∞ –±–µ–∑ —Ç–∏–ø–æ–≤

---

## ‚ùå –ß—Ç–æ –ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è pygame:

1. **–ù–µ—Ç —Ç–∏–ø–æ–≤ —Ä—ë–±–µ—Ä:**
   - –ù–µ–ª—å–∑—è –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ—Ä–æ–≥
   - –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å speed multipliers

2. **Hub-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
   - –í—Å–µ —É–∑–ª—ã –∫ —Å—Ç–æ–ª–∏—Ü–µ (–Ω–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ)
   - –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ—Ä–æ–≥

3. **–ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–∏–ø–æ–≤ –≤ World:**
   - –ù–µ–ª—å–∑—è –ø–æ–ª—É—á–∏—Ç—å —Ç–∏–ø —Ä–µ–±—Ä–∞
   - –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è

---

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä—ë–±–µ—Ä

**–¢–µ–∫—É—â–∞—è:**
```python
edges: List[Tuple[str, str]] = []  # (from, to)
```

**–ù—É–∂–Ω–∞:**
```python
edges: List[Tuple[str, str, str]] = []  # (from, to, road_type)
```

**–¢–∏–ø—ã –¥–æ—Ä–æ–≥:**
- `"main"` - –≥–ª–∞–≤–Ω—ã–µ –¥–æ—Ä–æ–≥–∏ (Capital ‚Üí Cities)
- `"secondary"` - –≤—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ (Cities ‚Üí Outposts)
- `"path"` - —Ç—Ä–æ–ø—ã (—Å–æ—Å–µ–¥–Ω–∏–µ Outposts)
- `"center"` - —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä (BorderCastle ‚Üí Center)

---

### 2. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–∞—Ä—Ç—ã

**–ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:**
- –£–±—Ä–∞—Ç—å hub-—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –î–æ–±–∞–≤–∏—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏
- –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã —Ä—ë–±–µ—Ä –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```python
# –í–º–µ—Å—Ç–æ:
edges.append((capital_node.id, city_id))

# –ù—É–∂–Ω–æ:
edges.append((capital_node.id, city_id, "main"))
```

---

### 3. World –∫–ª–∞—Å—Å

**–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- –ü–æ–¥–¥–µ—Ä–∂–∫—É —Ç–∏–ø–æ–≤ —Ä—ë–±–µ—Ä –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
- –ú–µ—Ç–æ–¥ `get_edge_type(from, to)`
- –û–±–Ω–æ–≤–∏—Ç—å `add_edge()` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–∏–ø–æ–≤
- –û–±–Ω–æ–≤–∏—Ç—å `get_neighbors()` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø–∞–º)

---

### 4. MapStorage

**–ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å:**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä—ë–±–µ—Ä —Å —Ç–∏–ø–∞–º–∏
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ä—ë–±–µ—Ä —Å —Ç–∏–ø–∞–º–∏
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–µ—Å–ª–∏ —Ä—ë–±—Ä–∞ –±–µ–∑ —Ç–∏–ø–æ–≤ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "path" –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

## üîß –ü–ª–∞–Ω –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–®–∞–≥ 1:** –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä—ë–±–µ—Ä (—Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é)
- World –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞ (—Å—Ç–∞—Ä—ã–π –∏ –Ω–æ–≤—ã–π)
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç —Ä—ë–±—Ä–∞ —Å —Ç–∏–ø–∞–º–∏
- MapStorage —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç/–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å —Ç–∏–ø–∞–º–∏

**–®–∞–≥ 2:** –û–±–Ω–æ–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- –£–±—Ä–∞—Ç—å hub-—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –î–æ–±–∞–≤–∏—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏
- –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã —Ä—ë–±–µ—Ä

**–®–∞–≥ 3:** –û–±–Ω–æ–≤–∏—Ç—å World
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤ —Ä—ë–±–µ—Ä
- –ú–µ—Ç–æ–¥ `get_edge_type()`

**–®–∞–≥ 4:** –û–±–Ω–æ–≤–∏—Ç—å MapStorage
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ —Å —Ç–∏–ø–∞–º–∏
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Å—Ä–∞–∑—É
- ‚úÖ –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ä–∞–∑—É

**–®–∞–≥ 1:** –û–±–Ω–æ–≤–∏—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä—ë–±–µ—Ä
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- World
- MapStorage

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –í—Å—ë –æ–±–Ω–æ–≤–ª–µ–Ω–æ —Å—Ä–∞–∑—É
- ‚úÖ –ß–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
- ‚ùå –°–ª–æ–∂–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –í–∞—Ä–∏–∞–Ω—Ç 1 (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ):**

1. **–°–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä:**
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã —Ä—ë–±–µ—Ä
   - –£–±—Ä–∞—Ç—å hub-—Å—Ç—Ä—É–∫—Ç—É—Ä—É
   - –î–æ–±–∞–≤–∏—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏

2. **–ü–æ—Ç–æ–º –æ–±–Ω–æ–≤–∏—Ç—å World:**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤ —Ä—ë–±–µ—Ä
   - –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–µ—Å–ª–∏ —Ä—ë–±—Ä–æ –±–µ–∑ —Ç–∏–ø–∞ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "path")

3. **–ü–æ—Ç–æ–º –æ–±–Ω–æ–≤–∏—Ç—å MapStorage:**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ —Å —Ç–∏–ø–∞–º–∏
   - –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

4. **–ü–æ—Ç–æ–º –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ pygame:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏–ø—ã —Ä—ë–±–µ—Ä –¥–ª—è —Ü–≤–µ—Ç–æ–≤
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è speed multipliers

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π –û—Ç–≤–µ—Ç

**–ù–ï–¢, —Ç–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ù–ï –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è pygame –∫–∞–∫ –µ—Å—Ç—å.**

**–ù–û:**
- ‚úÖ –ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–∑–ª–æ–≤ –ø–æ–¥—Ö–æ–¥–∏—Ç (Node —Å pos, type, role)
- ‚úÖ –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–∏–ø—ã —Ä—ë–±–µ—Ä –∏ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏

**–ü–ª–∞–Ω:**
1. –û–±–Ω–æ–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä (–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏ + —Ç–∏–ø—ã —Ä—ë–±–µ—Ä)
2. –û–±–Ω–æ–≤–∏—Ç—å World (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤)
3. –û–±–Ω–æ–≤–∏—Ç—å MapStorage (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–ø–æ–≤)
4. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ pygame

**–í—Ä–µ–º—è:** 2-3 –¥–Ω—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –ø–æ—Ç–æ–º pygame.

---

## üìù –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–§–∞–π–ª:** `data/map_config.json`

```json
{
  "connection_rules": {
    "hub_structure": {
      "enabled": false,  // –£–ë–†–ê–¢–¨
      "description": "–í—Å–µ —É–∑–ª—ã —Å–æ–µ–¥–∏–Ω–µ–Ω—ã —Å–æ —Å—Ç–æ–ª–∏—Ü–µ–π"
    },
    "hierarchical_structure": {
      "enabled": true,  // –î–û–ë–ê–í–ò–¢–¨
      "description": "–ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏: Capital ‚Üí Cities ‚Üí Outposts"
    },
    "road_types": {  // –î–û–ë–ê–í–ò–¢–¨
      "main": "Capital ‚Üí Cities",
      "secondary": "Cities ‚Üí Outposts",
      "path": "–°–æ—Å–µ–¥–Ω–∏–µ Outposts",
      "center": "BorderCastle ‚Üí Center"
    }
  }
}
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞

**–§–∞–π–ª:** `src/utils/map_generator.py`

```python
# –í–º–µ—Å—Ç–æ:
edges.append((capital_node.id, city_id))

# –ù—É–∂–Ω–æ:
edges.append((capital_node.id, city_id, "main"))
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ World

**–§–∞–π–ª:** `src/core/world.py`

```python
# –í–º–µ—Å—Ç–æ:
self.edges: List[Tuple[str, str]] = []

# –ù—É–∂–Ω–æ:
self.edges: List[Tuple[str, str, str]] = []  # (from, to, road_type)

# –° –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é:
def add_edge(self, node_from: str, node_to: str, road_type: str = "path"):
    """–î–æ–±–∞–≤–ª—è–µ—Ç —Ä–µ–±—Ä–æ —Å —Ç–∏–ø–æ–º"""
    if len(self.edges) > 0 and len(self.edges[0]) == 2:
        # –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç - –º–∏–≥—Ä–∏—Ä—É–µ–º
        self._migrate_edges()
    
    if (node_from, node_to, road_type) not in self.edges:
        self.edges.append((node_from, node_to, road_type))
    if (node_to, node_from, road_type) not in self.edges:
        self.edges.append((node_to, node_from, road_type))
```

---

## ‚úÖ –í—ã–≤–æ–¥

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç, –Ω–æ –ª–µ–≥–∫–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è.**

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –û–±–Ω–æ–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏ World (2-3 –¥–Ω—è)
2. –ü–æ—Ç–æ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ pygame
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏–ø—ã —Ä—ë–±–µ—Ä –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –¥–≤–∏–∂–µ–Ω–∏—è

**–ù–∞—á–∞—Ç—å —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞?**
